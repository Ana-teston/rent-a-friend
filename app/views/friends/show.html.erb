
<h1 class="text-center mt-2 mb-4 text-7xl font-extrabold text-rich-black"><%= @friend.first_name %> <%= @friend.last_name %><span class="text-light-purple"> Profile</span> ðŸ‘¤</h1>

<div class="flex justify-center items-center h-screen">
  <div class="bg-white rounded-lg shadow-md p-4" style="box-shadow: 0 4px 6px rgba(0, 0, 0, 0.2);">
    <div class="flex flex-col items-center">
      <div class="round-max-images">
        <%= cl_image_tag @friend.image.key, width: 250 %>
      </div>
      <div class="mt-2 text-center">
        <h4 class="text-lg font-medium"><%= @friend.first_name %> <%= @friend.last_name %></h4>
        <p class="text-gray-600 mb-2"><%= @friend.bio %></p>
      </div>
      <div class="border-t border-gray-200 mt-2"></div>
      <div class="text-center">
        <p class="text-gray-500 text-sm"><%= @friend.location %></p>
        <button class="bg-indigo-600 hover:bg-indigo-700 text-white font-medium py-2 px-4 rounded-md mt-2">$<%= @friend.price %></button>
      </div>
      <div class="border-t border-gray-200 mt-2"></div>
      <div class="mt-2">
        <ul class="list-group">
          <li class="list-group-item">
            <h6 class="text-sm font-medium">Age</h6>
            <span class="text-gray-600"><%= @friend.age %> Years old</span>
          </li>
          <li class="list-group-item">
            <h6 class="text-sm font-medium">Interests</h6>
            <span class="text-gray-600"><%= @friend.interests %></span>
          </li>
          <li class="list-group-item">
            <h6 class="text-sm font-medium">Activity</h6>
            <span class="text-gray-600"><%= @friend.activity %></span>
          </li>
        </ul>
      </div>
    </div>
  </div>
</div>






<div class="container mx-auto">
  <% if policy(@friend).edit? %>
    <%= link_to "Edit", edit_friend_path(@friend), class: "btn btn-primary" %>
  <% end %>
  <% if policy(@friend).destroy? %>
    <%= link_to "Delete", friend_path(@friend), data: {turbo_method: :delete, turbo_confirm: "you sure?" }, method: :delete, class: "btn btn-danger" %>
  <% end %>
</div>

<div class="rounded-lg shadow p-6" style="box-shadow: 0 4px 6px rgba(0, 0, 0, 0.2);">
  <div class="flex flex-wrap">
    <!-- customer reviews -->
    <% unless @reviews.empty? %>
      <div class="w-full lg:w-1/2 pr-4 mb-4 lg:mb-0">
        <div class="mb-6 bg-white rounded-lg shadow p-4" style="border-width: 2px; border-color: black; box-shadow: 0 4px 6px rgba(0, 0, 0, 0.2);">
          <h4 class="mb-3">Customer reviews</h4>
          <span class="text-14">
            <% @avg.times do %>
              <i class="fas fa-star text-warning"></i>
            <% end %>
            <% (5 - @avg).times do %>
              <i class="far fa-star text-warning"></i>
            <% end %>
          </span>
          <span class="text-h5"> <%= @avg %> out of 5</span>
          <p class="text-14"><%= @reviews.count %> customer ratings</p>
          <div class="flex items-center mb-1">
            <div class="w-1/6 pr-0">
              <div class="text-12 text-dark">5 Star</div>
            </div>
            <div class="w-8/12 pr-2">
              <div class="h-8 bg-warning rounded" style="width: <%= @reviews.where(rating: 5).count / @reviews.count.to_f * 100 %>%"></div>
            </div>
            <div class="w-1/6">
              <div class="text-12 text-primary"><%= (@reviews.where(rating: 5).count / @reviews.count.to_f * 100).to_i %>%</div>
            </div>
          </div>
          <div class="flex items-center mb-1">
            <div class="w-1/6 pr-0">
              <div class="text-12 text-dark">4 Star</div>
            </div>
            <div class="w-8/12 pr-2">
              <div class="h-8 bg-warning rounded" style="width: <%= (@reviews.where(rating: 4).count / @reviews.count.to_f * 100).to_i %>%"></div>
            </div>
            <div class="w-1/6">
              <div class="text-12 text-primary"><%= (@reviews.where(rating: 4).count / @reviews.count.to_f * 100).to_i %>%</div>
            </div>
          </div>
          <div class="flex items-center mb-1">
            <div class="w-1/6 pr-0">
              <div class="text-12 text-dark">3 Star</div>
            </div>
            <div class="w-8/12 pr-2">
              <div class="h-8 bg-warning rounded" style="width: <%=(@reviews.where(rating: 3).count / @reviews.count.to_f * 100).to_i %>%"></div>
            </div>
            <div class="w-1/6">
              <div class="text-12 text-primary"><%=(@reviews.where(rating: 3).count / @reviews.count.to_f * 100).to_i %>%</div>
            </div>
          </div>
          <div class="flex items-center mb-1">
            <div class="w-1/6 pr-0">
              <div class="text-12 text-dark">2 Star</div>
            </div>
            <div class="w-8/12 pr-2">
              <div class="h-8 bg-warning rounded" style="width: <%=(@reviews.where(rating: 2).count / @reviews.count.to_f * 100).to_i %>%"></div>
            </div>
            <div class="w-1/6">
              <div class="text-12 text-primary"><%=(@reviews.where(rating: 2).count / @reviews.count.to_f * 100).to_i %>%</div>
            </div>
          </div>
          <div class="flex items-center mb-2">
            <div class="w-1/6 pr-0">
              <div class="text-12 text-dark">1 Star</div>
            </div>
            <div class="w-8/12 pr-2">
              <div class="h-8 bg-warning rounded" style="width: <%=(@reviews.where(rating: 1).count / @reviews.count.to_f * 100).to_i %>%"></div>
            </div>
            <div class="w-1/6">
              <div class="text-12 text-primary"><%=(@reviews.where(rating: 1).count / @reviews.count.to_f * 100).to_i %>%</div>
            </div>
          </div>
        </div>
      </div>
    <% end %>
    <!-- customer reviews list -->
    <div class="w-full lg:w-1/2">
      <div class="flex items-center justify-between mb-4">
        <div>
          <h4 class="mb-0">Ratings &amp; Reviews</h4>
        </div>
      </div>
      <% @reviews.each do |review| %>
        <div class="mb-4 pb-4 border-b border-gray-300" style="box-shadow: 3px 4px 6px rgba(0, 0, 0, 0.2);">
          <div class="flex mb-3 items-center">
            <div class="ml-2">
              <h5 class="mb-1">
                <%= review.user.first_name %> <%= review.user.last_name %>
              </h5>
              <p class="text-12 mb-0">
                <%# created times ago %>
                <%= time_ago_in_words(review.created_at) %>
              </p>
            </div>
          </div>
          <div class="mb-2">
            <span class="text-14 mr-2">
              <% review.rating.times do %>
                <i class="fas fa-star text-warning"></i>
              <% end %>
              <% (5 - review.rating).times do %>
                <i class="far fa-star text-warning"></i>
              <% end %>
            </span>
            <span class="text-h5"> <%= review.title %> </span>
          </div>
          <p>
            <%= review.body %>
          </p>
          <% if policy(review).destroy? %>
            <%= link_to "Delete", review_path(review), data: {turbo_method: :delete, turbo_confirm: "you sure?" }, method: :delete, class: "btn btn-danger text-white" %>
          <% end %>
        </div>
      <% end %>
    </div>
  </div>
</div>
